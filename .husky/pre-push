echo "ğŸš€ Validation avant push..."

# VÃ©rifier la construction du projet
echo "ğŸ“¦ VÃ©rification du build..."
if ! pnpm run build; then
  echo "âŒ Build Ã©chouÃ©. Push annulÃ©."
  exit 1
fi

# VÃ©rifier l'historique des commits (optionnel - ne bloque pas le push si Ã§a Ã©choue)
echo "ğŸ“ Validation de l'historique des commits..."
if ! pnpx commitlint --from=origin/main --to=HEAD 2>/dev/null; then
  echo "âš ï¸  Avertissement: Validation des commits Ã©chouÃ©e, mais le push continue..."
fi

# Tests optionnels (ne bloquent pas le push mais informent)
echo "ğŸ§ª VÃ©rification des tests..."
if ! timeout 30s pnpm run test --run 2>/dev/null; then
  echo "âš ï¸  Avertissement: Certains tests Ã©chouent, mais le push continue..."
fi

echo "âœ… PrÃªt pour le push!"
