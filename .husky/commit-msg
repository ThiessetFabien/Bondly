# Validation du message de commit avec commitlint
pnpx commitlint --edit $1

# Afficher un message d'aide en cas d'erreur
if [ $? -ne 0 ]; then
  echo ""
  echo "‚ùå Message de commit invalide!"
  echo ""
  echo "Format OBLIGATOIRE: [gitmoji] type(scope): description"
  echo "Exemple: ‚ú® feat(auth): add OAuth2 LinkedIn integration"
  echo "Exemple: :wrench: chore(config): improve commit format"
  echo "Exemple: üêõ fix(partners): resolve pagination bug"
  echo ""
  echo "‚ö†Ô∏è  LES TROIS √âL√âMENTS SONT OBLIGATOIRES :"
  echo "   1. Gitmoji (code :emoji: ou √©moji üé≠)"
  echo "   2. Type conventionnel (feat, fix, docs, etc.)"
  echo "   3. Message descriptif (minimum 5 caract√®res)"
  echo ""
  echo "Types autoris√©s: feat, fix, docs, style, refactor, perf, test, chore, ci, build, revert, security, config"
  echo "Scopes sugg√©r√©s: auth, partners, users, classifications, notifications, stats, api, ui, config, database, security, tests, docs"
  echo ""
  echo "Guide: https://conventionalcommits.org/"
  echo "Gitmojis: https://gitmoji.dev/"
  echo ""
  exit 1
fi
